<div>
  <app-page-header [title]="pageTitle" [description]="pageDescription" />

  <p-card>
    <form class="space-y-4" [formGroup]="leadsForm" (ngSubmit)="onSubmit()">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- Nome -->
        <div class="flex flex-col gap-2">
          <!-- TODO: Criar componente de input com validação reativa -->
          <label for="name" class="font-medium">Nome *</label>
          <input
            pInputText
            type="text"
            id="name"
            placeholder="Digite o nome completo"
            formControlName="name"
            [class.ng-invalid]="isInvalid('name')"
          />
          @if (isInvalid('name')) { @if (leadsForm.get('name')?.errors?.['required']) {
          <p-message severity="error" size="small" variant="simple">Nome é obrigatório.</p-message>
          } @if (leadsForm.get('name')?.errors?.['minlength']) {
          <p-message severity="error" size="small" variant="simple"
            >Nome deve ter pelo menos 3 caracteres.</p-message
          >
          } }
        </div>

        <!-- Email -->
        <div class="flex flex-col gap-2">
          <label for="email" class="font-medium">Email *</label>
          <input
            pInputText
            type="email"
            id="email"
            placeholder="Digite o email"
            formControlName="email"
            [class.ng-invalid]="isInvalid('email')"
          />
          @if (isInvalid('email')) { @if (leadsForm.get('email')?.errors?.['required']) {
          <p-message severity="error" size="small" variant="simple">Email é obrigatório.</p-message>
          } @if (leadsForm.get('email')?.errors?.['email']) {
          <p-message severity="error" size="small" variant="simple">Email inválido.</p-message>
          } }
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <!-- CPF -->
        <div class="flex flex-col gap-2">
          <label for="cpf" class="font-medium">CPF *</label>
          <p-inputmask
            type="text"
            id="cpf"
            mask="999.999.999-99"
            placeholder="000.000.000-00"
            formControlName="cpf"
            [class.ng-invalid]="isInvalid('cpf')"
            styleClass="w-full"
          />
          @if (isInvalid('cpf')) {
          <p-message severity="error" size="small" variant="simple">CPF é obrigatório.</p-message>
          }
        </div>

        <!-- Telefone -->
        <div class="flex flex-col gap-2">
          <label for="phone" class="font-medium">Telefone *</label>
          <p-inputmask
            type="tel"
            id="phone"
            placeholder="(00) 00000-0000"
            formControlName="phone"
            [class.ng-invalid]="isInvalid('phone')"
            styleClass="w-full"
            mask="(99) 99999-9999"
          />
          @if (isInvalid('phone')) {
          <p-message severity="error" size="small" variant="simple"
            >Telefone é obrigatório.</p-message
          >
          }
        </div>

        <!-- Status -->
        <div class="flex flex-col gap-2">
          <label for="status" class="font-medium">Status *</label>
          <p-select
            [options]="statusOptions"
            formControlName="status"
            optionLabel="label"
            optionValue="value"
            placeholder="Selecione um status"
          />
          @if (isInvalid('status')) {
          <p-message severity="error" size="small" variant="simple"
            >Status é obrigatório.</p-message
          >
          }
        </div>
      </div>

      <!-- Cidade -->
      <div class="flex flex-col gap-2">
        <label for="city" class="font-medium">Cidade *</label>
        <input
          pInputText
          type="text"
          id="city"
          placeholder="Digite a cidade"
          formControlName="city"
          [class.ng-invalid]="isInvalid('city')"
        />
        @if (isInvalid('city')) {
        <p-message severity="error" size="small" variant="simple">Cidade é obrigatória.</p-message>
        }
      </div>

      <!-- Comentários -->
      <div class="flex flex-col gap-2">
        <label for="comments" class="font-medium">Comentários</label>
        <textarea
          pTextarea
          id="comments"
          formControlName="comments"
          placeholder="Digite comentários adicionais"
          rows="4"
        ></textarea>
      </div>

      <!-- Botões -->
      <div class="flex gap-4">
        <button pButton type="submit" label="Salvar" icon="pi pi-check"></button>
        <button
          pButton
          type="button"
          label="Cancelar"
          icon="pi pi-times"
          (click)="leadsForm.reset()"
        ></button>
      </div>
    </form>
  </p-card>
</div>
