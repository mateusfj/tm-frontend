<div class="flex flex-col gap-4">
  <app-page-header
    [onAction]="handelShowDialog.bind(this)"
    buttonLabel="Novo Cliente"
    description="Sua lista de clientes cadastrados"
    title="Clientes"
  />

  <!-- Leads Table -->
  <p-table [columns]="columns" [value]="leads.value()" [loading]="leads.isLoading()" size="small">
    <ng-template #header let-columns>
      <tr>
        @for (col of columns; track col) {
        <th>
          {{ col.header }}
        </th>
        }
        <th>Ações</th>
      </tr>
    </ng-template>
    <ng-template #body let-rowData let-columns="columns">
      <tr>
        @for (col of columns; track col) {
        <td>
          {{ rowData[col.field] }}
        </td>
        }
        <td class="space-x-2">
          <p-button
            severity="primary"
            variant="text"
            (click)="handleEditLead(rowData.id)"
            icon="pi pi-pencil"
          />
          <p-button
            severity="danger"
            variant="text"
            (click)="handleDeleteLead(rowData.id)"
            icon="pi pi-trash"
          />
        </td>
      </tr>
    </ng-template>
    <ng-template #emptymessage>
      <tr>
        <td class="text-center!" colspan="6">Nenhum cliente encontrado.</td>
      </tr>
    </ng-template>
  </p-table>

  <!-- Dialog Form -->
  <p-dialog header="Cadastrar Cliente" [modal]="true" [(visible)]="visible">
    <app-leads-form (close)="handleClose()" [leadId]="leadId"></app-leads-form>
  </p-dialog>
</div>
